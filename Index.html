<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LockGram – Earn While You Chat</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
  <style>
    :root{--blue:#007aff;--cyan:#00f5d4;--dark:#000;--card:#0f0f0f;--border:#333;}
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Inter',sans-serif;background:var(--dark);color:#e4e4e7;min-height:100vh;overflow-x:hidden}
    .container{max-width:600px;margin:0 auto;padding:0 20px}
    header{background:var(--dark);padding:16px 20px;border-bottom:1px solid var(--border);position:sticky;top:0;z-index:100}
    .header{display:flex;justify-content:space-between;align-items:center}
    .logo{font-size:24px;font-weight:700;color:var(--blue)} 
    .balance{background:var(--card);padding:8px 16px;border-radius:99px;font-family:'JetBrains Mono',monospace;font-weight:600;display:flex;align-items:center;gap:8px}
    .coin{width:20px;height:20px;background:var(--cyan);border-radius:50%;display:grid;place-items:center;color:#000;font-size:10px;font-weight:bold}
    .screen{display:none;padding:20px 0}
    .active{display:block}
    .welcome{text-align:center;padding:100px 20px 60px}
    .title{font-size:32px;font-weight:700;background:linear-gradient(135deg,var(--blue),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:16px}
    .subtitle{line-height:1.6;color:#888;margin-bottom:40px}
    .btn{width:100%;padding:16px;background:var(--blue);color:#fff;border:none;border-radius:16px;font-size:17px;font-weight:600;cursor:pointer;box-shadow:0 8px 30px rgba(0,122,255,.3);transition:.3s}
    .btn:hover{transform:translateY(-2px);box-shadow:0 12px 40px rgba(0,122,255,.5)}
    .post{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;margin-bottom:16px}
    .post-header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
    .avatar{width:42px;height:42px;border-radius:50%;background:linear-gradient(135deg,var(--blue),#9b59b6);display:grid;place-items:center;color:#fff;font-weight:bold}
    .username{font-weight:600}
    .time{font-size:13px;color:#888}
    .post-actions{display:flex;gap:20px;margin-top:12px}
    .act{display:flex;align-items:center;gap:6px;color:#888;cursor:pointer}
    .act.reward{color:var(--cyan);font-weight:600}
    .bottom-nav{position:fixed;bottom:0;left:0;right:0;background:var(--dark);border-top:1px solid var(--border);display:flex;padding:10px 0}
    .nav-item{flex:1;text-align:center;color:#666;cursor:pointer;padding:8px}
    .nav-item.active{color:var(--blue)}
    .nav-item svg{width:26px;height:26px}
  </style>
</head>
<body>
  <header>
    <div class="header container">
      <div class="logo">LockGram</div>
      <div class="balance" id="balanceDisplay">
        <div class="coin">LC</div>
        <span id="coins">0</span>
      </div>
    </div>
  </header>

  <!-- Welcome -->
  <div id="welcome" class="screen active welcome container">
    <h1 class="title">Welcome to LockGram</h1>
    <p class="subtitle">Private chats • Earn real LockCoins • 100% on-chain rewards<br>No ads. No tracking. Just you and the future.</p>
    <button class="btn" id="connectBtn">Connect TON Wallet</button>
  </div>

  <!-- Main App -->
  <div id="app" class="screen">
    <div id="feed" class="screen active container">
      <div class="post">
        <div class="post-header">
          <div class="avatar">A</div>
          <div>
            <div class="username">@alex_web3</div>
            <div class="time">now</div>
          </div>
        </div>
        <div>Gang, just earned 42 LockCoins for this post! Privacy + money in one app is insane</div>
        <div class="post-actions">
          <div class="act">Like 28</div>
          <div class="act">Comment 9</div>
          <div class="act reward" onclick="earn(42)">Claim +42 LC</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom Nav -->
  <div class="bottom-nav">
    <div class="nav-item active" onclick="nav('feed')"><svg fill="currentColor" viewBox="0 0 24 24"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg><div>Feed</div></div>
    <div class="nav-item" onclick="alert('AI coming v2')"><svg fill="currentColor" viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg><div>AI</div></div>
    <div class="nav-item" onclick="alert('Earnings page v2')"><svg fill="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><text x="12" y="16" text-anchor="middle" fill="#000" font-size="9">LC</text></svg><div>Earn</div></div>
    <div class="nav-item" onclick="alert('Profile v2')"><svg fill="currentColor" viewBox="0 0 0 24 24"><circle cx="12" cy="6" r="4"/><path d="M20 18v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/></svg><div>Me</div></div>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready(); tg.expand();
    tg.setHeaderColor('#000000');
    tg.setBackgroundColor('#000000');

    let balance = 0;
    const coinsEl = document.getElementById('coins');

    // TON Connect (real wallet!)
    const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
      manifestUrl: 'https://lockgram.com/tonconnect-manifest.json', // create this tiny file on your domain
      buttonRootId: 'connectBtn'
    });

    tonConnectUI.onStatusChange(wallet => {
      if (wallet) {
        document.getElementById('welcome').classList.remove('active');
        document.getElementById('app').classList.add('active');
        loadBalance(wallet.account.address);
        tg.MainButton.setText = "Invite Friends →";
        tg.MainButton.show();
        tg.MainButton.onClick(() => tg.shareUrl('https://t.me/Lockgramapp_bot/Lockgrammini', 'Join LockGram and earn with me!'));
      }
    });

    async function loadBalance(address) {
      // Replace with your real backend later – for now fake it till we make it
      balance = 1247;
      coinsEl.textContent = balance.toLocaleString();
    }

    function earn(amount) {
      balance += amount;
      coinsEl.textContent = balance.toLocaleString();
      tg.HapticFeedback.notificationOccurred('success');
      // Later: call your backend → mint Jetton to user
    }

    function nav(id) {
      document.querySelectorAll('#app .screen').forEach(s=>s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
      event.target.closest('.nav-item').classList.add('active');
    }

    // Auto-skip welcome if already connected (for testing)
    if (tonConnectUI.connected) {
      document.getElementById('welcome').classList.remove('active');
      document.getElementById('app').classList.add('active');
    }
  </script>
</body>
</html>
